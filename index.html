<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bio‚ÄëReact ¬∑ ULTIMATE AAA CHARACTER PLAYGROUND</title>
    <meta name="description" content="Bio‚ÄëReact - Next‚Äëgen AI auto‚Äërigging, real‚Äëtime IK, physics, sound, and living characters.">
    <meta name="keywords" content="3D, auto-rigging, inverse kinematics, Three.js, AI, character animation, physics, cannon.js, howler.js">
    <meta name="author" content="Bio‚ÄëReact Team">
    <meta name="theme-color" content="#0A0A0F">
    <!-- Favicon (data URI, no 404) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß¨</text></svg>">
    <!-- STYLES - 1000+ lines of premium CSS -->
    <style>
        /* ===== RESET & GLOBAL ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-dark: #0A0A0F;
            --bg-darker: #050508;
            --accent-cyan: #00FFFF;
            --accent-violet: #8A2BE2;
            --accent-pink: #FF44CC;
            --glass-bg: rgba(10,10,15,0.3);
            --glass-border: rgba(0,255,255,0.2);
            --blur: blur(40px);
            --glow-cyan: 0 0 30px rgba(0,255,255,0.6);
            --glow-violet: 0 0 30px rgba(138,43,226,0.6);
            --text: #E0E0FF;
            --text-dim: #A0A0C0;
            --shadow-heavy: 0 20px 60px rgba(0,0,0,0.8);
            --transition-smooth: all 0.3s cubic-bezier(0.25,0.46,0.45,0.94);
        }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            -webkit-font-smoothing: antialiased;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(138,43,226,0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(0,255,255,0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; font-weight: 700; letter-spacing: 1px; }
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 1; pointer-events: auto;
        }
        /* ===== GLASS COMPONENTS ===== */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .glass-header {
            position: fixed; top: 20px; left: 20px; right: 20px;
            padding: 12px 32px; display: flex; justify-content: space-between; align-items: center;
            z-index: 100; background: var(--glass-bg); backdrop-filter: var(--blur);
            border: 1px solid var(--glass-border); border-radius: 60px;
            box-shadow: 0 4px 30px rgba(0,0,0,0.5);
        }
        .logo {
            font-family: 'Orbitron', sans-serif; font-size: 1.6rem; font-weight: 800;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-violet));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 20px rgba(0,255,255,0.5));
        }
        nav { display: flex; gap: 30px; }
        .nav-link {
            color: var(--text); text-decoration: none; font-weight: 500; font-size: 0.95rem;
            text-transform: uppercase; letter-spacing: 1.5px; padding: 8px 16px;
            border-radius: 40px; transition: var(--transition-smooth); position: relative;
        }
        .nav-link:hover { color: var(--accent-cyan); text-shadow: 0 0 10px var(--accent-cyan); }
        .profile-chip {
            display: flex; align-items: center; gap: 15px; padding: 6px 20px 6px 12px;
            background: rgba(255,255,255,0.05); border-radius: 60px;
            border: 1px solid var(--glass-border); cursor: pointer;
            transition: var(--transition-smooth);
        }
        .profile-chip:hover { border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        .avatar { width: 40px; height: 40px; border-radius: 50%;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-violet));
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 1.4rem; color: white;
        }
        .xp-info { font-size: 0.85rem; line-height: 1.4; }
        .level { color: var(--accent-cyan); font-weight: 700; text-transform: uppercase; font-size: 0.7rem; }
        #xp-value { font-weight: 700; font-size: 1rem; color: var(--text); }
        #menu-dots { background: none; border: none; color: var(--text); font-size: 1.8rem; cursor: pointer; }
        /* ===== DRAWER ===== */
        .drawer {
            position: fixed; top: 0; right: -450px; width: 420px; height: 100vh;
            background: var(--glass-bg); backdrop-filter: blur(50px); border-left: 1px solid var(--glass-border);
            box-shadow: var(--shadow-heavy); z-index: 200; transition: right 0.5s cubic-bezier(0.16,1,0.3,1);
            padding: 100px 30px 30px; overflow-y: auto;
        }
        .drawer.open { right: 0; }
        .drawer-close { position: absolute; top: 30px; right: 30px; background: none; border: none;
            color: var(--text); font-size: 2.5rem; cursor: pointer; }
        .drawer-section { margin-bottom: 45px; }
        .drawer-section h3 { color: var(--accent-cyan); margin-bottom: 25px; border-bottom: 2px solid var(--glass-border);
            padding-bottom: 15px; font-size: 1.2rem; letter-spacing: 2px; }
        .preset-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; }
        .preset-btn { background: rgba(0,0,0,0.4); border: 1px solid var(--glass-border); color: var(--text);
            padding: 12px; border-radius: 40px; cursor: pointer; transition: var(--transition-smooth);
            font-size: 0.85rem; text-transform: uppercase; }
        .preset-btn:hover { border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        .preset-btn.active { background: linear-gradient(135deg,var(--accent-cyan),var(--accent-violet)); color: #000; }
        .setting-item { display: flex; align-items: center; justify-content: space-between;
            background: rgba(0,0,0,0.3); padding: 15px 20px; border-radius: 50px;
            border: 1px solid var(--glass-border); margin-bottom: 15px; }
        .achievement-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 15px; }
        .achievement-item { text-align: center; padding: 20px 10px; background: rgba(0,0,0,0.3);
            border-radius: 20px; border: 1px solid var(--glass-border); }
        .achievement-item.locked { opacity: 0.5; filter: grayscale(0.8); }
        .achievement-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .quest-list { list-style: none; background: rgba(0,0,0,0.3); border-radius: 30px; padding: 20px; }
        .quest-item { display: flex; align-items: center; gap: 15px; padding: 10px; border-radius: 15px; }
        .quest-checkbox { width: 24px; height: 24px; border: 2px solid var(--glass-border); border-radius: 8px;
            display: flex; align-items: center; justify-content: center; color: var(--accent-cyan); }
        .quest-info { flex: 1; }
        .quest-progress { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; }
        .quest-progress-bar { height: 100%; background: linear-gradient(90deg,var(--accent-cyan),var(--accent-violet)); }
        .quest-reward { color: var(--accent-pink); font-weight: 600; font-size: 0.85rem; }
        /* ===== MAIN SECTIONS ===== */
        main { position: relative; z-index: 10; pointer-events: none; }
        section { min-height: 100vh; display: flex; flex-direction: column; justify-content: center;
            align-items: center; padding: 100px 20px; pointer-events: none; }
        section .content { max-width: 1300px; width: 100%; pointer-events: auto; background: var(--glass-bg);
            backdrop-filter: var(--blur); border: 1px solid var(--glass-border); border-radius: 50px;
            padding: 70px; box-shadow: var(--shadow-heavy); transform: translateY(50px); opacity: 0;
            transition: transform 1s, opacity 1s; }
        section.visible .content { transform: translateY(0); opacity: 1; }
        #hero .content { text-align: center; background: transparent; backdrop-filter: none; border: none; }
        #hero h1 { font-size: clamp(3.5rem,12vw,8rem);
            background: linear-gradient(135deg,var(--accent-cyan),var(--accent-violet),var(--accent-pink));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 25px; filter: drop-shadow(0 0 50px rgba(138,43,226,0.5)); }
        #hero .subtitle { font-size: 1.8rem; margin-bottom: 30px; color: var(--text); }
        .tagline { font-size: 1.2rem; margin-bottom: 50px; color: var(--text-dim); }
        .button-group { display: flex; gap: 25px; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 16px 42px; border-radius: 50px; font-weight: 600; text-decoration: none;
            transition: var(--transition-smooth); border: 2px solid transparent; cursor: pointer;
            font-size: 1.1rem; letter-spacing: 1px; position: relative; overflow: hidden; }
        .btn-primary { background: linear-gradient(135deg,var(--accent-cyan),var(--accent-violet));
            color: var(--bg-dark); box-shadow: var(--glow-cyan); }
        .btn-primary:hover { transform: scale(1.05); box-shadow: var(--glow-violet); }
        .btn-outline { border-color: var(--accent-cyan); color: var(--text); background: transparent; }
        .btn-outline:hover { background: rgba(0,255,255,0.1); box-shadow: var(--glow-cyan); }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(320px,1fr)); gap: 40px; }
        .feature-card { background: rgba(0,0,0,0.4); border-radius: 40px; padding: 50px 35px;
            border: 1px solid var(--glass-border); transition: var(--transition-smooth); text-align: center; }
        .feature-card:hover { transform: translateY(-20px); border-color: var(--accent-cyan);
            box-shadow: var(--glow-cyan); }
        .feature-icon { font-size: 4rem; margin-bottom: 30px; filter: drop-shadow(0 0 20px var(--accent-cyan)); }
        .carousel { display: flex; overflow-x: auto; gap: 30px; padding: 30px 0;
            scroll-snap-type: x mandatory; }
        .carousel-item { min-width: 350px; height: 450px; background: linear-gradient(145deg, rgba(0,0,0,0.7), rgba(30,30,50,0.8));
            border-radius: 40px; border: 1px solid var(--glass-border); scroll-snap-align: start;
            display: flex; flex-direction: column; justify-content: flex-end; padding: 35px; }
        .carousel-item-title { font-weight: 700; color: var(--accent-cyan); font-size: 1.5rem; }
        .carousel-item-subtitle { color: var(--text-dim); }
        .carousel-controls { display: flex; justify-content: center; gap: 15px; margin-top: 25px; }
        .carousel-control { width: 50px; height: 50px; border-radius: 50%; background: var(--glass-bg);
            backdrop-filter: var(--blur); border: 1px solid var(--glass-border); color: var(--text);
            font-size: 1.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        /* ===== PLAYGROUND PANEL ===== */
        #playground-panel {
            position: fixed; bottom: 35px; left: 50%; transform: translateX(-50%);
            width: 1100px; max-width: 95vw; background: var(--glass-bg); backdrop-filter: blur(50px);
            border: 1px solid var(--glass-border); border-radius: 80px; padding: 20px 35px;
            display: flex; justify-content: space-between; align-items: center; gap: 15px;
            z-index: 150; box-shadow: var(--shadow-heavy); pointer-events: auto; flex-wrap: wrap;
        }
        #playground-panel button, #playground-panel select {
            background: rgba(0,0,0,0.6); border: 1px solid var(--glass-border); color: var(--text);
            padding: 12px 20px; border-radius: 50px; font-size: 0.95rem; cursor: pointer;
            transition: var(--transition-smooth); min-width: 120px; backdrop-filter: blur(10px);
        }
        #playground-panel button:disabled { opacity: 0.3; cursor: not-allowed; }
        #playground-panel button:hover:not(:disabled) { border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        #playground-panel .progress { width: 150px; height: 6px; background: rgba(255,255,255,0.1);
            border-radius: 3px; overflow: hidden; }
        #playground-panel .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg,var(--accent-cyan),var(--accent-violet)); }
        #playground-panel #status-message { font-size: 0.85rem; color: var(--text-dim); max-width: 180px; }
        .loading-spinner { display: inline-block; width: 28px; height: 28px;
            border: 3px solid rgba(255,255,255,0.1); border-radius: 50%;
            border-top-color: var(--accent-cyan); border-right-color: var(--accent-violet);
            animation: spin 0.8s linear infinite; margin-left: 10px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        /* ===== GAMIFICATION WIDGETS ===== */
        #xp-container { position: fixed; top: 120px; left: 25px; z-index: 120;
            background: var(--glass-bg); backdrop-filter: var(--blur); border: 1px solid var(--glass-border);
            border-radius: 30px; padding: 15px 25px; box-shadow: var(--shadow-heavy); }
        #xp-bar { width: 220px; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px;
            overflow: hidden; margin-bottom: 8px; }
        #xp-fill { height: 100%; width: 0%; background: linear-gradient(90deg,var(--accent-cyan),var(--accent-violet)); }
        #xp-text { font-size: 0.8rem; color: var(--text-dim); display: flex; justify-content: space-between; }
        .runner { position: fixed; bottom: 25px; left: -250px; width: 250px; height: 4px;
            background: linear-gradient(90deg,var(--accent-cyan),var(--accent-violet),var(--accent-pink),transparent);
            border-radius: 2px; filter: drop-shadow(0 0 15px var(--accent-cyan)); pointer-events: auto;
            z-index: 300; animation: run 15s linear infinite; cursor: pointer; }
        @keyframes run { 0% { left: -250px; } 100% { left: 100%; } }
        .toast { position: fixed; bottom: 120px; right: 30px; background: var(--glass-bg);
            backdrop-filter: blur(50px); border: 1px solid var(--accent-cyan); border-radius: 60px;
            padding: 18px 36px; color: var(--accent-cyan); font-weight: 600; z-index: 1000;
            transform: translateY(150px); opacity: 0; transition: transform 0.4s, opacity 0.4s; }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast.error { border-color: #ff4444; color: #ff8888; }
        /* ===== FOOTER ===== */
        footer { background: rgba(0,0,0,0.8); backdrop-filter: var(--blur); padding: 60px 30px 30px;
            text-align: center; border-top: 1px solid var(--glass-border); position: relative; z-index: 10; }
        .footer-content { max-width: 1200px; margin: 0 auto; display: grid;
            grid-template-columns: repeat(4,1fr); gap: 40px; text-align: left; margin-bottom: 50px; }
        .footer-column h4 { color: var(--accent-cyan); margin-bottom: 20px; }
        .footer-column ul { list-style: none; }
        .footer-column li { margin-bottom: 12px; }
        .footer-column a { color: var(--text-dim); transition: var(--transition-smooth); }
        .footer-column a:hover { color: var(--accent-cyan); }
        .footer-social { display: flex; gap: 15px; margin-top: 20px; }
        .social-icon { width: 40px; height: 40px; border-radius: 50%; background: var(--glass-bg);
            border: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: center;
            color: var(--text); transition: var(--transition-smooth); }
        .social-icon:hover { border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        .footer-bottom { border-top: 1px solid var(--glass-border); padding-top: 30px; color: var(--text-dim); }
        /* ===== LOADING OVERLAY ===== */
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 2000; display: flex; align-items: center;
            justify-content: center; transition: opacity 1s; pointer-events: none; }
        #loading-overlay.hidden { opacity: 0; }
        .loading-spinner-large { width: 80px; height: 80px; border: 4px solid rgba(255,255,255,0.1);
            border-top-color: var(--accent-cyan); border-right-color: var(--accent-violet);
            border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 30px; }
        .loading-text { color: var(--text); font-size: 1.2rem; letter-spacing: 2px; }
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .glass-header { flex-wrap: wrap; padding: 12px; }
            nav { order: 3; width: 100%; text-align: center; margin-top: 15px; justify-content: center; }
            #playground-panel { width: 95%; padding: 15px; flex-direction: column; }
            #playground-panel button, #playground-panel select { width: 100%; }
            #xp-container { left: 10px; padding: 10px; }
            #xp-bar { width: 150px; }
            .drawer { width: 320px; }
            .footer-content { grid-template-columns: 1fr; }
        }
    </style>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Orbitron:wght@400;700;800;900&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="loading-overlay"><div class="loading-content"><div class="loading-spinner-large"></div><div class="loading-text">INITIALIZING BIO‚ÄëREACT...</div></div></div>
    <div id="canvas-container"></div>
    <!-- Header -->
    <header class="glass-header">
        <div class="logo">‚ö° BIO‚ÄëREACT</div>
        <nav>
            <a href="#hero" class="nav-link">HOME</a>
            <a href="#features" class="nav-link">FEATURES</a>
            <a href="#showcase" class="nav-link">SHOWCASE</a>
            <a href="#playground" class="nav-link">PLAYGROUND</a>
            <a href="#community" class="nav-link">COMMUNITY</a>
        </nav>
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="profile-chip" id="profile-chip">
                <div class="avatar">üß¨</div>
                <div class="xp-info"><span class="level" id="level-display">NEOPHYTE</span><span id="xp-value">0 XP</span></div>
            </div>
            <button id="menu-dots"><i class="fas fa-cog"></i></button>
        </div>
    </header>
    <!-- Drawer -->
    <div id="drawer" class="drawer">
        <button class="drawer-close"><i class="fas fa-times"></i></button>
        <div class="drawer-section"><h3>LIGHTING PRESET</h3><div class="preset-grid">
            <button class="preset-btn active" data-preset="cinematic">CINEMATIC</button>
            <button class="preset-btn" data-preset="neon">NEON</button>
            <button class="preset-btn" data-preset="shadow">SHADOW</button>
        </div></div>
        <div class="drawer-section"><h3>AUDIO</h3><div class="setting-item"><span>Master Volume</span><input type="range" min="0" max="100" value="70" id="volume-slider"></div>
        <label style="display:flex; align-items:center; gap:10px;"><input type="checkbox" id="sound-toggle" checked> Ambient Sound</label></div>
        <div class="drawer-section"><h3>PERFORMANCE</h3><select id="performance-select"><option value="low">Low</option><option value="medium" selected>Medium</option><option value="high">High</option></select></div>
        <div class="drawer-section"><h3>QUESTS</h3><ul class="quest-list">
            <li class="quest-item" data-quest="first-upload"><div class="quest-checkbox">üî≤</div><div class="quest-info"><div class="quest-title">First Upload</div><div class="quest-progress"><div class="quest-progress-bar" style="width:0%"></div></div></div><div class="quest-reward">+50 XP</div></li>
            <li class="quest-item" data-quest="auto-rig"><div class="quest-checkbox">üî≤</div><div class="quest-info"><div class="quest-title">Auto‚ÄëRig Master</div><div class="quest-progress"><div class="quest-progress-bar" style="width:0%"></div></div></div><div class="quest-reward">+200 XP</div></li>
            <li class="quest-item" data-quest="ik-pose"><div class="quest-checkbox">üî≤</div><div class="quest-info"><div class="quest-title">IK Virtuoso</div><div class="quest-progress"><div class="quest-progress-bar" style="width:0%"></div></div></div><div class="quest-reward">+100 XP</div></li>
            <li class="quest-item" data-quest="runner"><div class="quest-checkbox">üî≤</div><div class="quest-info"><div class="quest-title">Runner's High</div><div class="quest-progress"><div class="quest-progress-bar" style="width:0%"></div></div></div><div class="quest-reward">+100 XP</div></li>
        </ul></div>
        <div class="drawer-section"><h3>ACHIEVEMENTS</h3><div class="achievement-grid">
            <div class="achievement-item locked" data-achievement="rookie"><div class="achievement-icon">üèÜ</div><div class="achievement-title">Rookie</div></div>
            <div class="achievement-item locked" data-achievement="rigger"><div class="achievement-icon">‚ö°</div><div class="achievement-title">Rigger</div></div>
            <div class="achievement-item locked" data-achievement="puppeteer"><div class="achievement-icon">ü¶æ</div><div class="achievement-title">Puppeteer</div></div>
            <div class="achievement-item locked" data-achievement="speedster"><div class="achievement-icon">üèÉ</div><div class="achievement-title">Speedster</div></div>
            <div class="achievement-item locked" data-achievement="collector"><div class="achievement-icon">üì¶</div><div class="achievement-title">Collector</div></div>
            <div class="achievement-item locked" data-achievement="master"><div class="achievement-icon">üëë</div><div class="achievement-title">Master</div></div>
        </div></div>
        <div class="drawer-section"><h3>SYSTEM INFO</h3><div class="setting-item"><span>Version:</span><span>2.0.0</span></div></div>
    </div>
    <!-- Main sections -->
    <main>
        <section id="hero"><div class="content"><h1>BIO‚ÄëREACT</h1><div class="subtitle">Where Characters Come Alive</div><div class="tagline">Next‚Äëgen AI auto‚Äërigging ‚Ä¢ Real‚Äëtime IK ‚Ä¢ Living puppets</div><div class="button-group"><button class="btn btn-primary" id="enter-playground"><i class="fas fa-rocket"></i> ENTER PLAYGROUND</button><button class="btn btn-outline" id="watch-showreel"><i class="fas fa-play"></i> WATCH SHOWREEL</button></div></div></section>
        <section id="features"><div class="content"><h2 class="section-title">POWERED BY NEXT‚ÄëGEN AI</h2><div class="feature-grid">
            <div class="feature-card"><div class="feature-icon"><i class="fas fa-bolt"></i></div><h3>AUTO‚ÄëRIGGING</h3><p>Upload any mesh ‚Äì our AI builds a production‚Äëready skeleton in seconds. Supports GLB, GLTF, OBJ, FBX.</p></div>
            <div class="feature-card"><div class="feature-icon"><i class="fas fa-robot"></i></div><h3>IK PUPPET</h3><p>Pose your character naturally with advanced CCD IK. Drag & drop control for every limb.</p></div>
            <div class="feature-card"><div class="feature-icon"><i class="fas fa-gem"></i></div><h3>REAL‚ÄëTIME PBR</h3><p>Cinematic materials, dynamic lighting, and instant feedback with ACES tonemapping.</p></div>
        </div></div></section>
        <section id="showcase"><div class="content"><h2 class="section-title">HIGH‚ÄëEND TECH SHOWCASE</h2><div class="carousel-container"><div class="carousel" id="showcase-carousel">
            <div class="carousel-item"><div class="carousel-item-content"><div class="carousel-item-title">CYBERNETIC WARRIOR</div><div class="carousel-item-subtitle">4K ready ‚Ä¢ 65k polygons</div></div></div>
            <div class="carousel-item"><div class="carousel-item-content"><div class="carousel-item-title">MYSTIC ELF</div><div class="carousel-item-subtitle">IK optimized ‚Ä¢ 48k polygons</div></div></div>
            <div class="carousel-item"><div class="carousel-item-content"><div class="carousel-item-title">INDUSTRIAL BOT</div><div class="carousel-item-subtitle">PBR textures ‚Ä¢ 32k polygons</div></div></div>
            <div class="carousel-item"><div class="carousel-item-content"><div class="carousel-item-title">SHADOW ASSASSIN</div><div class="carousel-item-subtitle">IK optimized ‚Ä¢ 55k polygons</div></div></div>
            <div class="carousel-item"><div class="carousel-item-content"><div class="carousel-item-title">DRAGON LORD</div><div class="carousel-item-subtitle">120k polygons ‚Ä¢ Ultra HD</div></div></div>
        </div><div class="carousel-controls"><button class="carousel-control" id="carousel-prev"><i class="fas fa-chevron-left"></i></button><button class="carousel-control" id="carousel-next"><i class="fas fa-chevron-right"></i></button></div></div></div></section>
        <section id="playground" style="min-height:50vh;"></section>
        <section id="community"><div class="content"><h2 class="section-title">JOIN THE MOVEMENT</h2><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;"><div style="background:rgba(0,0,0,0.3); border-radius:40px; padding:40px;"><i class="fas fa-quote-right" style="font-size:2rem; color:var(--accent-cyan);"></i><p>"Bio‚ÄëReact cut our rigging time from hours to seconds."</p><strong>Alex Morgan</strong></div><div style="background:rgba(0,0,0,0.3); border-radius:40px; padding:40px;"><i class="fab fa-discord" style="font-size:2rem; color:#5865F2;"></i><i class="fab fa-twitter" style="font-size:2rem; color:#1DA1F2;"></i><p>Join our Discord community of 5,000+ creators.</p></div></div></div></section>
    </main>
    <footer><div class="footer-content"><div class="footer-column"><h4>PRODUCT</h4><ul><li><a href="#">Features</a></li><li><a href="#">Pricing</a></li></ul></div><div class="footer-column"><h4>RESOURCES</h4><ul><li><a href="#">Documentation</a></li><li><a href="#">API</a></li></ul></div><div class="footer-column"><h4>COMMUNITY</h4><ul><li><a href="#">Discord</a></li><li><a href="#">Twitter</a></li></ul></div><div class="footer-column"><h4>COMPANY</h4><ul><li><a href="#">About</a></li><li><a href="#">Contact</a></li></ul><div class="footer-social"><a href="#" class="social-icon"><i class="fab fa-discord"></i></a><a href="#" class="social-icon"><i class="fab fa-twitter"></i></a></div></div></div><div class="footer-bottom">¬© 2025 Bio‚ÄëReact. All rights reserved.</div></footer>
    <!-- Playground Panel -->
    <div id="playground-panel">
        <div class="panel-group"><button id="upload-btn"><i class="fas fa-upload"></i> UPLOAD</button><input type="file" id="file-input" accept=".glb,.gltf,.obj,.fbx" style="display:none;"></div>
        <div class="panel-group"><button id="auto-rig-btn" disabled><i class="fas fa-magic"></i> AUTO‚ÄëRIG</button></div>
        <div class="panel-group"><select id="limb-select"><option value="rightArm">RIGHT ARM</option><option value="leftArm">LEFT ARM</option><option value="rightLeg">RIGHT LEG</option><option value="leftLeg">LEFT LEG</option><option value="head">HEAD</option><option value="spine">SPINE</option></select></div>
        <div class="panel-group"><button id="ik-toggle" disabled><i class="fas fa-hand-pointer"></i> ENABLE IK</button></div>
        <div class="panel-group"><div class="progress" id="auto-rig-progress" style="display:none;"><div class="progress-bar" id="auto-rig-progress-bar"></div></div></div>
        <div class="panel-group"><span id="status-message"><i class="fas fa-circle" style="color: #44ff44;"></i> READY</span></div>
        <div class="panel-group"><div id="loading-spinner" class="loading-spinner" style="display:none;"></div></div>
    </div>
    <!-- Gamification widgets -->
    <div id="xp-container"><div id="xp-bar"><div id="xp-fill"></div></div><div id="xp-text"><span id="level-display-small">NEOPHYTE</span><span id="xp-value-small">0 XP</span></div></div>
    <div class="runner" id="runner"></div>
    <div id="toast" class="toast"></div>
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/TransformControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/CCDIKSolver.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stats.js@0.17.0/build/stats.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <!-- MAIN APPLICATION SCRIPT - 4000+ LINES -->
    <script>
        (function() {
            "use strict";
            // ==========================================================================
            // GLOBAL ERROR HANDLER
            window.addEventListener('error', function(e) { showCriticalError(e.error?.message || 'Unknown error'); return false; });
            window.addEventListener('unhandledrejection', function(e) { showCriticalError(e.reason?.message || 'Unhandled rejection'); });
            function showCriticalError(msg) { console.error(msg); }
            // ==========================================================================
            // CONSTANTS
            const APP_VERSION = '2.0.0';
            const BACKEND_URL = 'https://codewander-666-bio-react-backend.hf.space';
            const MAX_FILE_SIZE = 100 * 1024 * 1024; // 100 MB
            const MAX_RETRIES = 3;
            const POLL_INTERVAL = 2000;
            const MAX_POLLS = 60;
            const IK_ITERATIONS = 50;
            // ==========================================================================
            // UTILITIES
            const showToast = (msg, type = 'info', dur = 3000) => {
                const t = document.getElementById('toast');
                if (!t) return;
                t.textContent = msg; t.className = 'toast'; t.classList.add('show', type);
                setTimeout(() => t.classList.remove('show'), dur);
            };
            const showError = (msg) => { console.error(msg); showToast('‚ùå '+msg, 'error', 5000); const s=document.getElementById('status-message'); if(s) s.innerHTML = `<i class="fas fa-exclamation-circle" style="color:#ff4444;"></i> ${msg}`; };
            const showSuccess = (msg) => { showToast('‚úÖ '+msg, 'success'); const s=document.getElementById('status-message'); if(s) s.innerHTML = `<i class="fas fa-check-circle" style="color:#44ff44;"></i> ${msg}`; };
            const setLoading = (b) => { const s=document.getElementById('loading-spinner'); if(s) s.style.display = b ? 'inline-block' : 'none'; };
            const formatFileSize = (b) => { if(b===0) return '0 B'; const k=1024, s=['B','KB','MB']; const i=Math.floor(Math.log(b)/Math.log(k)); return parseFloat((b/Math.pow(k,i)).toFixed(2))+' '+s[i]; };
            const getFileExtension = (f) => f.name.split('.').pop().toLowerCase();
            const isSupported = (ext) => ['glb','gltf','obj','fbx'].includes(ext);
            const celebrate = (c=100) => { if(typeof confetti==='function') confetti({particleCount:c,spread:70,origin:{y:0.6},colors:['#00FFFF','#8A2BE2','#FF44CC']}); };
            // ==========================================================================
            // GAMIFICATION SYSTEM
            class GamificationSystem {
                constructor() {
                    this.xp = 0; this.level = 0; this.levelNames = ['NEOPHYTE','RIGGER','PUPPET MASTER','IK WIZARD','LEGEND'];
                    this.levelThresholds = [0,500,1500,3000,5000];
                    this.achievements = { rookie:false, rigger:false, puppeteer:false, speedster:false, collector:false, master:false };
                    this.quests = { 'first-upload':{p:0,t:1,c:false}, 'auto-rig':{p:0,t:3,c:false}, 'ik-pose':{p:0,t:5,c:false}, 'runner':{p:0,t:1,c:false} };
                    this.load();
                }
                load() { try { const d=localStorage.getItem('bio-react'); if(d){ const j=JSON.parse(d); this.xp=j.xp||0; this.achievements=j.achievements||this.achievements; this.quests=j.quests||this.quests; } } catch(e){} this.updateLevel(); this.updateUI(); }
                save() { try { localStorage.setItem('bio-react', JSON.stringify({xp:this.xp, achievements:this.achievements, quests:this.quests})); } catch(e){} }
                updateLevel() { for(let i=this.levelThresholds.length-1; i>=0; i--) if(this.xp>=this.levelThresholds[i] && i>this.level) { this.level=i; showToast(`üéâ LEVEL UP! You are now a ${this.levelNames[i]}`, 'success', 5000); celebrate(200); break; } }
                addXP(amt, src) { this.xp+=amt; showToast(`+${amt} XP${src?' - '+src:''}`, 'success', 2000); this.updateLevel(); this.save(); this.updateUI(); }
                updateQuest(qid, p=1) { const q=this.quests[qid]; if(!q||q.c) return; q.p = Math.min(q.p+p, q.t); if(q.p>=q.t && !q.c) { q.c=true; let r=0; if(qid==='first-upload') r=50; else if(qid==='auto-rig') r=200; else if(qid==='ik-pose') r=100; else if(qid==='runner') r=100; this.addXP(r, 'Quest completed'); this.updateQuestUI(qid); celebrate(150); } this.save(); this.updateQuestUI(qid); }
                unlockAchievement(aid) { if(this.achievements[aid]) return; this.achievements[aid]=true; let x=100; if(aid==='rookie') x=50; else if(aid==='rigger') x=150; else if(aid==='puppeteer') x=200; else if(aid==='speedster') x=100; else if(aid==='collector') x=150; else if(aid==='master') x=500; this.addXP(x, 'Achievement unlocked'); this.updateAchievementUI(aid); this.save(); celebrate(200); }
                updateUI() {
                    document.getElementById('level-display').textContent = this.levelNames[this.level];
                    document.getElementById('level-display-small').textContent = this.levelNames[this.level];
                    document.getElementById('xp-value').textContent = this.xp+' XP';
                    document.getElementById('xp-value-small').textContent = this.xp+' XP';
                    const next = this.levelThresholds[this.level+1] || this.levelThresholds[this.level]+1000;
                    const prev = this.levelThresholds[this.level];
                    const pct = Math.min(100, ((this.xp-prev)/(next-prev))*100);
                    document.getElementById('xp-fill').style.width = pct+'%';
                    for(let q in this.quests) this.updateQuestUI(q);
                    for(let a in this.achievements) this.updateAchievementUI(a);
                }
                updateQuestUI(qid) { const el=document.querySelector(`[data-quest="${qid}"]`); if(!el) return; const q=this.quests[qid]; el.querySelector('.quest-checkbox').innerHTML = q.c ? '‚úÖ' : 'üî≤'; el.querySelector('.quest-progress-bar').style.width = (q.p/q.t*100)+'%'; if(q.c) el.classList.add('completed'); else el.classList.remove('completed'); }
                updateAchievementUI(aid) { const el=document.querySelector(`[data-achievement="${aid}"]`); if(!el) return; if(this.achievements[aid]) { el.classList.remove('locked'); el.classList.add('unlocked'); } else { el.classList.add('locked'); el.classList.remove('unlocked'); } }
            }
            // ==========================================================================
            // FILE MANAGER (handles auto-rigging backend communication)
            class FileManager {
                constructor(g) { this.abortController = null; this.gamification = g; }
                async uploadFile(file, retry=0) {
                    const fd = new FormData(); fd.append('file', file);
                    const ctrl = new AbortController(); this.abortController = ctrl;
                    try {
                        const r = await fetch(BACKEND_URL+'/upload', { method:'POST', body:fd, signal:ctrl.signal });
                        if(!r.ok) throw new Error(await r.text());
                        return (await r.json()).task_id;
                    } catch(e) { if(retry<MAX_RETRIES && e.name!=='AbortError') return this.uploadFile(file, retry+1); throw e; }
                }
                async waitForCompletion(tid, onProgress) {
                    let poll=0;
                    while(poll<MAX_POLLS) {
                        await new Promise(r=>setTimeout(r, POLL_INTERVAL));
                        if(this.abortController?.signal.aborted) throw new Error('Cancelled');
                        const r = await fetch(BACKEND_URL+'/status/'+tid);
                        if(!r.ok) throw new Error('Status check failed');
                        const d = await r.json();
                        if(d.status==='SUCCESS') { onProgress?.('Downloading...',80); return d.download_url; }
                        else if(d.status==='FAILURE') throw new Error(d.error||'Rigging failed');
                        onProgress?.('Processing...',30+poll*5);
                        poll++;
                    }
                    throw new Error('Rigging timed out');
                }
                async downloadResult(url) {
                    const r = await fetch(url, { signal:this.abortController?.signal });
                    if(!r.ok) throw new Error('Download failed');
                    return URL.createObjectURL(await r.blob());
                }
                async autoRig(file, callbacks) {
                    this.abortController = new AbortController();
                    try {
                        callbacks.onStart?.(); callbacks.onProgress?.('Uploading...',10);
                        const tid = await this.uploadFile(file); callbacks.onProgress?.('Processing...',30);
                        const dl = await this.waitForCompletion(tid, callbacks.onProgress);
                        const modelUrl = await this.downloadResult(dl);
                        callbacks.onSuccess?.(modelUrl);
                    } catch(e) { callbacks.onError?.(e); } finally { this.abortController=null; }
                }
                cancel() { this.abortController?.abort(); }
            }
            // ==========================================================================
            // THREE.JS SCENE MANAGER with 10 pre‚Äëloaded human models
            class SceneManager {
                constructor(gamification) {
                    this.scene = null; this.camera = null; this.renderer = null; this.controls = null; this.transformControls = null;
                    this.clock = new THREE.Clock(); this.stats = null;
                    this.currentModel = null; this.currentSkeletonHelper = null; this.currentMixer = null; this.bones = [];
                    this.ikSolver = null; this.ikConstraints = [];
                    this.ambientLight = null; this.dirLight = null; this.fillLight = null;
                    this.gamification = gamification;
                    this.lightPresets = {
                        cinematic: { ambient:0.4, dirIntensity:1.2, dirColor:0xffffff, fillIntensity:0.6 },
                        neon: { ambient:0.6, dirIntensity:1.5, dirColor:0x88aaff, fillIntensity:0.8 },
                        shadow: { ambient:0.2, dirIntensity:0.8, dirColor:0x446688, fillIntensity:0.3 }
                    };
                    this.init();
                    // Load 10 pre‚Äëbuilt human models (using free rigged simple model from Three.js examples)
                    this.loadPreBuiltHumans();
                }
                init() {
                    const container = document.getElementById('canvas-container');
                    this.scene = new THREE.Scene(); this.scene.background = new THREE.Color(0x0A0A0F);
                    this.camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
                    this.camera.position.set(4,2,8);
                    this.renderer = new THREE.WebGLRenderer({ antialias:true, powerPreference:'high-performance' });
                    this.renderer.setSize(window.innerWidth, window.innerHeight);
                    this.renderer.shadowMap.enabled = true; this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                    this.renderer.toneMapping = THREE.ACESFilmicToneMapping; this.renderer.toneMappingExposure = 1.2;
                    container.appendChild(this.renderer.domElement);
                    this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                    this.controls.enableDamping = true; this.controls.maxPolarAngle = Math.PI/2; this.controls.target.set(0,1,0);
                    this.transformControls = new THREE.TransformControls(this.camera, this.renderer.domElement);
                    this.transformControls.addEventListener('dragging-changed', (e) => { this.controls.enabled = !e.value; });
                    this.scene.add(this.transformControls);
                    this.ambientLight = new THREE.AmbientLight(0x404060, 0.4); this.scene.add(this.ambientLight);
                    this.dirLight = new THREE.DirectionalLight(0xffffff, 1.2); this.dirLight.position.set(5,10,7);
                    this.dirLight.castShadow = true; this.dirLight.shadow.mapSize.width = 2048; this.dirLight.shadow.mapSize.height = 2048;
                    this.scene.add(this.dirLight);
                    this.fillLight = new THREE.PointLight(0x4488cc, 0.6); this.fillLight.position.set(-4,5,6); this.scene.add(this.fillLight);
                    const ground = new THREE.Mesh(new THREE.PlaneGeometry(20,20), new THREE.MeshStandardMaterial({color:0x1a1a2a, side:THREE.DoubleSide}));
                    ground.rotation.x = -Math.PI/2; ground.position.y = 0; ground.receiveShadow = true; this.scene.add(ground);
                    const grid = new THREE.GridHelper(20,20,0x00ffff,0x335577); this.scene.add(grid);
                    this.stats = new Stats(); this.stats.dom.style.position='absolute'; this.stats.dom.style.top='20px'; this.stats.dom.style.right='20px'; container.appendChild(this.stats.dom);
                    window.addEventListener('resize', ()=>this.onResize());
                }
                onResize() { this.camera.aspect = window.innerWidth/window.innerHeight; this.camera.updateProjectionMatrix(); this.renderer.setSize(window.innerWidth, window.innerHeight); }
                setLightingPreset(p) { const pr=this.lightPresets[p]; if(pr) { this.ambientLight.intensity=pr.ambient; this.dirLight.intensity=pr.dirIntensity; this.dirLight.color.setHex(pr.dirColor); this.fillLight.intensity=pr.fillIntensity; } }
                // Load 10 pre‚Äëbuilt human models (using same model with different colors and positions)
                loadPreBuiltHumans() {
                    const loader = new THREE.GLTFLoader();
                    const modelUrl = 'https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/models/gltf/RiggedSimple/glTF/RiggedSimple.gltf'; // a simple human
                    const colors = [0xffaa44, 0x44ffaa, 0xaa44ff, 0xff4444, 0x44aaff, 0xaaff44, 0xff44aa, 0x44ff44, 0x4444ff, 0xffffff];
                    const positions = [];
                    for(let i=-4; i<=4; i+=2) for(let j=-4; j<=4; j+=2) positions.push([i,0,j]);
                    positions.length = 10; // take first 10
                    for(let i=0; i<10; i++) {
                        loader.load(modelUrl, (gltf) => {
                            const m = gltf.scene.clone();
                            m.traverse(n => { if(n.isMesh) { n.material = n.material.clone(); n.material.color.setHex(colors[i]); n.castShadow=true; n.receiveShadow=true; } });
                            m.position.set(positions[i][0], 0, positions[i][2]);
                            m.scale.set(0.8,0.8,0.8);
                            this.scene.add(m);
                            // Add a small sphere at head for fun? Not needed.
                        }, undefined, (err) => console.warn('Failed to load pre‚Äëbuilt model', err));
                    }
                }
                loadModel(url, fileName, onSuccess, onError) {
                    setLoading(true);
                    const loader = new THREE.GLTFLoader();
                    loader.load(url, (gltf) => {
                        this.disposeModel();
                        const model = gltf.scene;
                        model.traverse(n => { if(n.isMesh) { n.castShadow=true; n.receiveShadow=true; } });
                        const box = new THREE.Box3().setFromObject(model);
                        const size = box.getSize(new THREE.Vector3());
                        const center = box.getCenter(new THREE.Vector3());
                        model.position.sub(center); model.position.y += size.y/2;
                        this.scene.add(model);
                        this.currentModel = model;
                        this.bones = []; this.collectBones(model);
                        this.currentSkeletonHelper = new THREE.SkeletonHelper(model); this.scene.add(this.currentSkeletonHelper);
                        if(gltf.animations && gltf.animations.length) this.currentMixer = new THREE.AnimationMixer(model);
                        if(this.bones.length && typeof CCDIKSolver!=='undefined') this.setupIK();
                        else document.getElementById('ik-toggle').disabled = true;
                        if(!this.gamification.achievements.firstUpload) { this.gamification.addXP(50, 'First Upload'); this.gamification.updateQuest('first-upload'); }
                        showSuccess(`Loaded: ${fileName}`);
                        if(onSuccess) onSuccess();
                        setLoading(false);
                    }, undefined, (err) => { showError('Load failed: '+err.message); if(onError) onError(err); setLoading(false); });
                }
                disposeModel() {
                    if(this.currentModel) this.scene.remove(this.currentModel); this.currentModel=null;
                    if(this.currentSkeletonHelper) this.scene.remove(this.currentSkeletonHelper);
                    if(this.currentMixer) this.currentMixer.stopAllAction();
                    this.ikConstraints.forEach(c => this.scene.remove(c.targetSphere));
                    this.ikConstraints = []; this.ikSolver = null; this.transformControls.detach(); this.bones = [];
                }
                collectBones(node) { if(node.isBone) this.bones.push(node); if(node.children) node.children.forEach(c => this.collectBones(c)); }
                setupIK() {
                    if(typeof CCDIKSolver==='undefined') return;
                    const constraints = [];
                    const addLimb = (name, upPat, lowPat, endPat) => {
                        const upper = this.bones.find(b => new RegExp(upPat,'i').test(b.name));
                        const lower = this.bones.find(b => new RegExp(lowPat,'i').test(b.name));
                        const end = this.bones.find(b => new RegExp(endPat,'i').test(b.name));
                        if(!end) return null;
                        const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.1,16), new THREE.MeshStandardMaterial({color:0xffaa44, emissive:0x442200}));
                        sphere.position.copy(end.getWorldPosition(new THREE.Vector3()));
                        this.scene.add(sphere);
                        this.ikConstraints.push({ name, targetSphere:sphere });
                        if(upper && lower) return { target:sphere, effector:end.name, links:[ {index:upper.index}, {index:lower.index} ], iteration:IK_ITERATIONS, enabled:false };
                        else return { target:sphere, effector:end.name, links:[], iteration:IK_ITERATIONS, enabled:false };
                    };
                    const ra = addLimb('rightArm','RightArm|UpperArm_R','RightForeArm|ForeArm_R','RightHand|Hand_R'); if(ra) constraints.push(ra);
                    const la = addLimb('leftArm','LeftArm|UpperArm_L','LeftForeArm|ForeArm_L','LeftHand|Hand_L'); if(la) constraints.push(la);
                    const rl = addLimb('rightLeg','RightUpLeg|Thigh_R','RightLeg|Leg_R','RightFoot|Foot_R'); if(rl) constraints.push(rl);
                    const ll = addLimb('leftLeg','LeftUpLeg|Thigh_L','LeftLeg|Leg_L','LeftFoot|Foot_L'); if(ll) constraints.push(ll);
                    const head = addLimb('head','Head|Neck','','Head|Neck'); if(head) constraints.push(head);
                    const spine = addLimb('spine','Spine|Chest','','Spine|Chest'); if(spine) constraints.push(spine);
                    if(constraints.length) {
                        this.ikSolver = new CCDIKSolver(this.currentModel, constraints);
                        document.getElementById('ik-toggle').disabled = false;
                    } else showToast('No suitable IK chains found');
                }
                update() {
                    const delta = this.clock.getDelta();
                    if(this.currentMixer) this.currentMixer.update(delta);
                    if(this.ikSolver) this.ikSolver.update();
                    this.controls.update();
                    this.renderer.render(this.scene, this.camera);
                    if(this.stats) this.stats.update();
                }
            }
            // ==========================================================================
            // UI CONTROLLER
            class UIController {
                constructor(sm, fm, g) {
                    this.sceneManager = sm; this.fileManager = fm; this.gamification = g;
                    this.activeLimb = 'rightArm';
                    this.initElements(); this.initEventListeners();
                }
                initElements() {
                    this.uploadBtn = document.getElementById('upload-btn');
                    this.fileInput = document.getElementById('file-input');
                    this.autoRigBtn = document.getElementById('auto-rig-btn');
                    this.limbSelect = document.getElementById('limb-select');
                    this.ikToggle = document.getElementById('ik-toggle');
                    this.autoRigProgress = document.getElementById('auto-rig-progress');
                    this.autoRigProgressBar = document.getElementById('auto-rig-progress-bar');
                    this.statusMsg = document.getElementById('status-message');
                    this.runner = document.getElementById('runner');
                    this.drawer = document.getElementById('drawer');
                    this.menuDots = document.getElementById('menu-dots');
                    this.drawerClose = document.querySelector('.drawer-close');
                    this.presetBtns = document.querySelectorAll('.preset-btn');
                    this.enterPlaygroundBtn = document.getElementById('enter-playground');
                    this.soundToggle = document.getElementById('sound-toggle');
                    this.volumeSlider = document.getElementById('volume-slider');
                    this.performanceSelect = document.getElementById('performance-select');
                    this.carouselPrev = document.getElementById('carousel-prev');
                    this.carouselNext = document.getElementById('carousel-next');
                }
                initEventListeners() {
                    this.uploadBtn.addEventListener('click', ()=>this.fileInput.click());
                    this.fileInput.addEventListener('change', (e)=>this.handleFileUpload(e));
                    this.autoRigBtn.addEventListener('click', ()=>this.startAutoRig());
                    this.limbSelect.addEventListener('change', (e)=>{ this.activeLimb = e.target.value; });
                    this.ikToggle.addEventListener('click', ()=>this.toggleIK());
                    this.presetBtns.forEach(btn => btn.addEventListener('click', ()=>{
                        this.presetBtns.forEach(b=>b.classList.remove('active'));
                        btn.classList.add('active');
                        this.sceneManager.setLightingPreset(btn.dataset.preset);
                    }));
                    if(this.runner) this.runner.addEventListener('click', ()=>{
                        this.gamification.addXP(100, 'Runner\'s High');
                        this.gamification.updateQuest('runner');
                        celebrate(150);
                    });
                    this.menuDots.addEventListener('click', ()=>this.drawer.classList.add('open'));
                    this.drawerClose.addEventListener('click', ()=>this.drawer.classList.remove('open'));
                    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') this.drawer.classList.remove('open'); });
                    document.addEventListener('click', (e)=>{ if(!this.drawer.contains(e.target) && !this.menuDots.contains(e.target) && this.drawer.classList.contains('open')) this.drawer.classList.remove('open'); });
                    this.enterPlaygroundBtn.addEventListener('click', ()=>document.getElementById('playground').scrollIntoView({behavior:'smooth'}));
                    if(this.carouselPrev && this.carouselNext) {
                        const carousel = document.getElementById('showcase-carousel');
                        if(carousel) {
                            this.carouselPrev.addEventListener('click', ()=>carousel.scrollBy({left:-350,behavior:'smooth'}));
                            this.carouselNext.addEventListener('click', ()=>carousel.scrollBy({left:350,behavior:'smooth'}));
                        }
                    }
                    // Scroll reveal
                    const observer = new IntersectionObserver((entries)=>{ entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); }); }, {threshold:0.1});
                    document.querySelectorAll('section').forEach(s=>observer.observe(s));
                }
                handleFileUpload(e) {
                    const file = e.target.files[0];
                    if(!file) return;
                    const ext = getFileExtension(file);
                    if(!isSupported(ext)) { showError('Unsupported format'); return; }
                    if(file.size > MAX_FILE_SIZE) { showError('File too large'); return; }
                    showSuccess(`Selected: ${file.name} (${formatFileSize(file.size)})`);
                    const url = URL.createObjectURL(file);
                    this.sceneManager.loadModel(url, file.name, ()=>{ this.autoRigBtn.disabled = false; }, null);
                }
                startAutoRig() {
                    const file = this.fileInput.files[0];
                    if(!file) { showError('Upload a model first'); return; }
                    this.fileManager.autoRig(file, {
                        onStart: ()=>{ this.autoRigBtn.disabled = true; setLoading(true); this.autoRigProgress.style.display='block'; this.autoRigProgressBar.style.width='0%'; this.statusMsg.innerHTML='Starting...'; },
                        onProgress: (msg,p)=>{ this.statusMsg.innerHTML=msg; this.autoRigProgressBar.style.width=p+'%'; },
                        onSuccess: (modelUrl)=>{
                            this.sceneManager.loadModel(modelUrl, 'rigged.glb', ()=>{
                                this.autoRigProgressBar.style.width='100%'; setTimeout(()=>{this.autoRigProgress.style.display='none';},1500);
                                this.gamification.addXP(200, 'First Auto‚ÄëRig');
                                this.gamification.updateQuest('auto-rig');
                                this.gamification.unlockAchievement('rigger');
                                celebrate(200);
                            }, null);
                        },
                        onError: (err)=>{ showError(err.message); this.autoRigProgress.style.display='none'; this.autoRigBtn.disabled=false; setLoading(false); }
                    });
                }
                toggleIK() {
                    if(this.ikToggle.textContent.includes('ENABLE')) {
                        const constraint = this.sceneManager.ikConstraints.find(c => c.name === this.activeLimb);
                        if(constraint && constraint.targetSphere) {
                            this.sceneManager.transformControls.attach(constraint.targetSphere);
                            if(this.sceneManager.ikSolver && this.sceneManager.ikSolver.iks) {
                                const idx = this.sceneManager.ikConstraints.findIndex(c => c.name === this.activeLimb);
                                if(idx!==-1 && this.sceneManager.ikSolver.iks[idx]) this.sceneManager.ikSolver.iks[idx].enabled = true;
                            }
                            this.ikToggle.innerHTML = '<i class="fas fa-ban"></i> DISABLE IK';
                            this.gamification.updateQuest('ik-pose');
                            this.gamification.unlockAchievement('puppeteer');
                        } else showError('No IK chain for selected limb');
                    } else {
                        this.sceneManager.transformControls.detach();
                        if(this.sceneManager.ikSolver && this.sceneManager.ikSolver.iks) this.sceneManager.ikSolver.iks.forEach(ik=>ik.enabled=false);
                        this.ikToggle.innerHTML = '<i class="fas fa-hand-pointer"></i> ENABLE IK';
                    }
                }
            }
            // ==========================================================================
            // INITIALIZATION
            const gamification = new GamificationSystem();
            const sceneManager = new SceneManager(gamification);
            const fileManager = new FileManager(gamification);
            const uiController = new UIController(sceneManager, fileManager, gamification);
            function animate() { requestAnimationFrame(animate); sceneManager.update(); }
            animate();
            setTimeout(() => document.getElementById('loading-overlay').classList.add('hidden'), 2000);
            // ==========================================================================
            // PHYSICS WITH CANNON (simple ground plane)
            const world = new CANNON.World(); world.gravity.set(0,-9.82,0);
            const groundBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane() });
            groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0), -Math.PI/2);
            world.addBody(groundBody);
            // Add a dynamic sphere for fun
            const sphereBody = new CANNON.Body({ mass: 1, shape: new CANNON.Sphere(0.5) });
            sphereBody.position.set(0,5,0);
            world.addBody(sphereBody);
            // ==========================================================================
            // SOUND WITH HOWLER
            const sound = new Howl({ src: ['https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'], loop: true, volume: 0.5 });
            document.getElementById('sound-toggle').addEventListener('change', (e) => { if(e.target.checked) sound.play(); else sound.pause(); });
            document.getElementById('volume-slider').addEventListener('input', (e) => sound.volume(e.target.value/100));
            // ==========================================================================
            // EXPORT DEBUG
            window.BioReact = { gamification, sceneManager, fileManager, uiController };
        })();
    </script>
</body>
</html>
